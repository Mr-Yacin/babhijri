---
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/common/Header.astro";
import Footer from "../../components/common/Footer.astro";
import ProfileGrid from "../../components/dating/ProfileGrid.svelte";
import AdUnit from "../../components/ads/AdUnit.astro";
import DismissableAd from "../../components/ads/DismissableAd.svelte";
import { SITE_CONFIG, ANALYTICS_CONFIG } from "../../config";
---

<Layout title={`ØªØ¹Ø§Ø±Ù | ${SITE_CONFIG.name}`}>
	<Header />

	<main class="min-h-screen bg-gray-50">
		<!-- Page Header -->
		<section
			class="bg-gradient-to-r from-pink-900 to-pink-700 text-white py-16"
		>
			<div class="container mx-auto px-4">
				<h1 class="text-4xl md:text-5xl font-bold mb-4 text-center">
					Ø§Ø¨Ø­Ø« Ø¹Ù† Ø´Ø±ÙŠÙƒ Ø­ÙŠØ§ØªÙƒ
				</h1>
				<p class="text-pink-100 text-center text-lg max-w-2xl mx-auto">
					ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø£Ø´Ø®Ø§Øµ Ø¬Ø¯Ø¯ Ù…Ù† Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø­ÙˆÙ„ Ø§Ù„Ø¹Ø§Ù„Ù… ÙˆØ§Ø¹Ø«Ø± Ø¹Ù„Ù‰
					Ø´Ø±ÙŠÙƒ Ø­ÙŠØ§ØªÙƒ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ
				</p>
			</div>
		</section>

		<!-- Profile Grid Section with Auth Check -->
		<section class="py-12 relative">
			<div class="container mx-auto px-4">
				<div class="flex flex-col lg:flex-row gap-6">
					<!-- Main Content Area -->
					<div class="flex-1">
						<!-- Auth Overlay (shown when not logged in) -->
						<div id="auth-overlay" class="hidden">
							<div
								class="absolute inset-0 z-20 flex items-center justify-center pointer-events-none"
							>
								<div
									class="bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-8 md:p-12 max-w-2xl mx-4 pointer-events-auto border-4 border-pink-200"
								>
									<div class="text-center">
										<div
											class="w-20 h-20 bg-gradient-to-br from-pink-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6"
										>
											<svg
												xmlns="http://www.w3.org/2000/svg"
												class="h-10 w-10 text-white"
												viewBox="0 0 20 20"
												fill="currentColor"
											>
												<path
													fill-rule="evenodd"
													d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z"
													clip-rule="evenodd"></path>
											</svg>
										</div>
										<h3
											class="text-3xl md:text-4xl font-bold text-gray-900 mb-4"
										>
											ğŸ”“ Ø§ÙØªØ­ Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„ÙƒØ§Ù…Ù„
										</h3>
										<p class="text-lg text-gray-600 mb-6">
											Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù† Ù…Ø¬Ø§Ù†Ø§Ù‹ Ù„ØªØµÙØ­ Ø§Ù„Ù…Ù„ÙØ§Øª
											Ø§Ù„ÙƒØ§Ù…Ù„Ø©ØŒ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ØŒ ÙˆØ§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹
											Ø£Ø´Ø®Ø§Øµ Ù…Ù…ÙŠØ²ÙŠÙ†
										</p>

										<!-- Benefits List -->
										<div
											class="bg-gradient-to-br from-pink-50 to-purple-50 rounded-2xl p-6 mb-8 text-right"
										>
											<p
												class="font-bold text-gray-900 mb-3 text-center"
											>
												Ù…Ø§Ø°Ø§ Ø³ØªØ­ØµÙ„ Ø¹Ù†Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„:
											</p>
											<ul class="space-y-2 text-gray-700">
												<li
													class="flex items-center gap-3"
												>
													<svg
														class="h-5 w-5 text-green-500 flex-shrink-0"
														fill="currentColor"
														viewBox="0 0 20 20"
													>
														<path
															fill-rule="evenodd"
															d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
															clip-rule="evenodd"
														></path>
													</svg>
													<span
														>ØªØµÙØ­ Ø¢Ù„Ø§Ù Ø§Ù„Ù…Ù„ÙØ§Øª
														Ø§Ù„Ø´Ø®ØµÙŠØ© Ø§Ù„Ù…Ù…ÙŠØ²Ø©</span
													>
												</li>
												<li
													class="flex items-center gap-3"
												>
													<svg
														class="h-5 w-5 text-green-500 flex-shrink-0"
														fill="currentColor"
														viewBox="0 0 20 20"
													>
														<path
															fill-rule="evenodd"
															d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
															clip-rule="evenodd"
														></path>
													</svg>
													<span
														>Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
														Ø¨Ø¯ÙˆÙ† Ø­Ø¯ÙˆØ¯</span
													>
												</li>
												<li
													class="flex items-center gap-3"
												>
													<svg
														class="h-5 w-5 text-green-500 flex-shrink-0"
														fill="currentColor"
														viewBox="0 0 20 20"
													>
														<path
															fill-rule="evenodd"
															d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
															clip-rule="evenodd"
														></path>
													</svg>
													<span
														>Ù…Ø¹Ø±ÙØ© Ù…Ù† Ø£Ø¹Ø¬Ø¨ Ø¨Ù…Ù„ÙÙƒ
														Ø§Ù„Ø´Ø®ØµÙŠ</span
													>
												</li>
												<li
													class="flex items-center gap-3"
												>
													<svg
														class="h-5 w-5 text-green-500 flex-shrink-0"
														fill="currentColor"
														viewBox="0 0 20 20"
													>
														<path
															fill-rule="evenodd"
															d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
															clip-rule="evenodd"
														></path>
													</svg>
													<span
														>ÙÙ„Ø§ØªØ± Ø¨Ø­Ø« Ù…ØªÙ‚Ø¯Ù…Ø© Ø­Ø³Ø¨
														Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„Ø§Ù‡ØªÙ…Ø§Ù…Ø§Øª</span
													>
												</li>
												<li
													class="flex items-center gap-3"
												>
													<svg
														class="h-5 w-5 text-green-500 flex-shrink-0"
														fill="currentColor"
														viewBox="0 0 20 20"
													>
														<path
															fill-rule="evenodd"
															d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
															clip-rule="evenodd"
														></path>
													</svg>
													<span
														>Ø®ØµÙˆØµÙŠØ© ÙˆØ£Ù…Ø§Ù† ÙƒØ§Ù…Ù„
														Ù„Ø¨ÙŠØ§Ù†Ø§ØªÙƒ</span
													>
												</li>
											</ul>
										</div>

										<div
											class="flex flex-col sm:flex-row gap-4 justify-center"
										>
											<a
												href="/app/signup"
												class="bg-gradient-to-r from-pink-600 to-purple-600 text-white px-10 py-5 rounded-full font-bold text-xl hover:from-pink-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center"
											>
												<span>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…Ø¬Ø§Ù†ÙŠ</span>
												<svg
													xmlns="http://www.w3.org/2000/svg"
													class="h-6 w-6 mr-2"
													viewBox="0 0 20 20"
													fill="currentColor"
												>
													<path
														d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"
													></path>
												</svg>
											</a>
											<a
												href="/app/login"
												class="bg-white text-gray-800 border-2 border-gray-300 px-10 py-5 rounded-full font-bold text-xl hover:bg-gray-50 transition-all flex items-center justify-center"
											>
												<span>Ù„Ø¯ÙŠ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„</span>
											</a>
										</div>
										<p class="text-sm text-gray-500 mt-6">
											âœ“ Ù…Ø¬Ø§Ù†ÙŠ 100% âœ“ Ø¨Ø¯ÙˆÙ† Ø¨Ø·Ø§Ù‚Ø© Ø§Ø¦ØªÙ…Ø§Ù† âœ“
											Ø®ØµÙˆØµÙŠØ© ØªØ§Ù…Ø©
										</p>
									</div>
								</div>
							</div>
						</div>

						<!-- Profile Grid (will be blurred if not logged in) -->
						<div id="profile-grid-container">
							<ProfileGrid client:only="svelte" />
						</div>

						<!-- Logged-in Only Ad Banner -->
						<div id="logged-in-ad-banner" class="hidden mt-8">
							<AdUnit
								slot={ANALYTICS_CONFIG.adsense.slots.blogMiddle}
								format="horizontal"
								responsive={true}
								className="app-middle-banner"
							/>
						</div>
					</div>

					<!-- Sidebar Ad (Desktop Only) -->
					<aside class="hidden lg:block lg:w-80 flex-shrink-0">
						<div class="sticky top-24">
							<AdUnit
								slot={ANALYTICS_CONFIG.adsense.slots.appSidebar}
								format="vertical"
								className="sidebar-ad"
							/>
						</div>
					</aside>
				</div>

				<!-- Bottom Sticky Ad (Mobile Only) -->
				<DismissableAd
					slot={ANALYTICS_CONFIG.adsense.slots.appMobileSticky}
					format="horizontal"
					className="lg:hidden fixed bottom-0 left-0 right-0 z-40 mobile-sticky-ad"
					client:load
				/>
			</div>
		</section>
	</main>

	<script>
		import { authStore } from "../../lib/stores/auth";

		const overlay = document.getElementById("auth-overlay");
		const gridContainer = document.getElementById("profile-grid-container");
		const adBanner = document.getElementById("logged-in-ad-banner");

		const unsubscribe = authStore.subscribe((state) => {
			if (!state.loading) {
				if (!state.isLoggedIn) {
					// Show overlay and blur profiles
					if (overlay) {
						overlay.classList.remove("hidden");
					}
					if (gridContainer) {
						gridContainer.style.filter = "blur(8px)";
						gridContainer.style.pointerEvents = "none";
						gridContainer.style.userSelect = "none";
					}
					if (adBanner) {
						adBanner.classList.add("hidden");
					}
				} else {
					// Hide overlay and remove blur
					if (overlay) {
						overlay.classList.add("hidden");
					}
					if (gridContainer) {
						gridContainer.style.filter = "none";
						gridContainer.style.pointerEvents = "auto";
						gridContainer.style.userSelect = "auto";
					}
					if (adBanner) {
						adBanner.classList.remove("hidden");
					}
				}
			}
		});
	</script>

	<style>
		:global(.mobile-sticky-ad) {
			margin: 0;
			padding: 0.5rem;
		}

		/* Ensure mobile sticky ad doesn't overlap content */
		@media (max-width: 1023px) {
			main {
				padding-bottom: 120px;
			}
		}
	</style>

	<Footer />
</Layout>
